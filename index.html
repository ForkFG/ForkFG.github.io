<!doctype html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
		<title>【Barren Land 蛮荒大陆】</title>
		<style>
			.line
			{
				border-top: green 1.75px solid;
				border-bottom: white 1px solid;
				border-radius: 5px;
				margin: 15px;
				width: 100%;
			}
			.lines
			{
				border-top: green 1.75px dotted;
				border-bottom: white 1px dotted;
				border-radius: 5px;
				margin: 10px;
				width: 75%;
			}
			.sel,.key
			{
				color: green;
				background-color: white;
				padding: 10px;
				border: 2px solid green;
				border-radius: 10px;
				margin: 10px;
				width: 200px;
				line-height: 25px;
			}
			.sel:hover
			{
				color: white;
				background-color: green;
			}
			.selbox
			{
				width: 14px;
				height: 14px;
				border-radius: 50px;
				border: 2px solid green;
				background-color: white;
			}
			.selbox>:first-child
			{
				width: 5px;
				height: 5px;
				border-radius:50%;
				border: 2px solid green;
				background-color: green;
				margin: 2.4px;
			}
			.input
			{
				color: green;
				background-color: white;
				padding: 10px;
				border: 2px solid green;
				border-radius: 10px;
				margin: 10px;
				width: 200px;
				line-height: 25px;
			}
			.cover
			{
				width: 100%;
				height: 100%;
				position: absolute;
				top: 0;
				left: 0;
				z-index: 9999;
				opacity: 0.7;
				background-color: black;
				display: none;
			}
			.dialog
			{
				z-index: 10000;
				position: absolute;
				color: green;
				background-color: #d0e4fe;
				padding: 10px;
				border: 2px solid green;
				border-radius: 10px;
				margin: 10px;
				display: none;
			}
	      
			body
			{
				user-select: none;
				background-color: #d0e4fe;
				color: green;
				font-family: "宋体";
				margin: 40px;
			}
			h1,h2,h3,h4,h5,h6,p,b
			{
				margin: 2px;
				font-family: "宋体";
			}
			span
			{
				display: block;
			}
			a
			{
				text-decoration: none;
			}
		</style>
		<script>
			//配置变量
			var if$debug=false;
			var ver="0.1.3";
			var date="2018-10-25";
			//基本功能
			function NF(){}
			function Log(txt)
			{
				if(if$debug)console.log(txt);
			}
			function Element(id)
			{
				return document.getElementById(id);
			}
			function Type(id,cbf$,if$clear,txt,time=30)
			{
				if(if$debug)time=0.5;
				var $txt=Element(id);
				if(if$clear)$txt.innerHTML="";
				var i=0;
				function cbf$type()
				{
					if(!txt[i])clearInterval(timer$),cbf$();
					else if(txt[i]==" ")$txt.innerHTML+="&nbsp;"
					else if(txt[i]=="$")$txt.innerHTML+="<br>";
					else if(txt[i]=="%")$txt.innerHTML+="<div class='lines'></div>";
					else if(txt[i]=="#")$txt.innerHTML+="<div class='line'></div>";
					else $txt.innerHTML+=txt[i];
					i++;
				}
				var timer$=setInterval(cbf$type,time);
			}
			function HideElement(id)
			{
				Element(id).style.display="none";
			}
			function ShowElement(id)
			{
				Element(id).style.display="block";
			}
			function NewElement(id,tab)
			{
				var $i=document.createElement(tab);
				$i.id=id;
				return $i;
			}
			function DelElement(id)
			{
				var $i=Element(id);
				$i.parentNode.removeChild($i);
			}
			function SetFocus(id)
			{
				Element("focus").dataset.sel=id;
			}
			function GetFocus()
			{
				return Element("focus").dataset.sel;
			}
			function NowInput(event)
			{
				function EndInput()
				{
					document.body.removeEventListener("keydown",NowInput);
					Element(GetFocus()).style.boxShadow="";
					SetFocus("/");
				}
				var $focus=Element(GetFocus());
				var $form=Element($focus.dataset.form);
				var len_=parseInt($form.dataset.len_);
				var len=parseInt($form.dataset.len);
				if(event.key=="Enter")EndInput();
				else if((event.key=="Backspace")&&len>0)
				{
					$form.dataset.value=$form.dataset.value.substring(0,--len);
					if(len==0)
					{
						$form.dataset.value="/";
						$focus.innerHTML="<h3>&nbsp;</h3>";
					}
					else $focus.innerHTML="<h3>"+$form.dataset.value+"</h3>";
				}
				else if(event.key.length==1&&(event.key>="a"&&event.key<="z"||event.key>="A"&&event.key<="Z"||event.key=="_")&&len<len_)
				{
					if(len++==0)$form.dataset.value=event.key;
					else $form.dataset.value+=event.key;
					$focus.innerHTML="<h3>"+$form.dataset.value+"</h3>";
				}
				$form.dataset.len=len;
			}
			function StartInput()
			{
				Element(GetFocus()).style.boxShadow="0 0 10px green";
				document.body.addEventListener("keydown",NowInput);
			}
			function FormInput(form)
			{
				Element(form).dataset.value="/";
			}
			function AddInput(form,id,len_)
			{
				var $input=Element(id);
				$input.dataset.form=form;
				var $form=Element($input.dataset.form);
				$form.dataset.len_=len_;
				$form.dataset.len=0;
				$input.onclick=function(e)
				{
					SetFocus(this.id);
					StartInput();
				}
			}
			function SubmitInput(form,id,f_submit)
			{
				var $input=Element(id);
				$input.dataset.form=form;
				Element(form).dataset.submit=f_submit;
				Element(id).onclick=function()
				{
					eval(Element(this.dataset.form).dataset.submit);
					submit(Element(this.dataset.form).dataset.value);
				}
			}
			function FormSelbox(form)
			{
				Element(form).dataset.sel="/";
			}
			function AddSelbox(form,id)
			{
				var $selbox=Element(id);
				$selbox.dataset.form=form;
				$selbox.onclick=function()
				{
					let $form_=Element(this.dataset.form);
					if($form_.dataset.sel!="/")Element($form_.dataset.sel).firstElementChild.style.display="none";
					Element(this.dataset.form).dataset.sel=this.id;
					this.firstElementChild.style.display="block";
				}
			}
			function SubmitSelbox(form,id,f_submit)
			{
				$input=Element(id);
				$input.dataset.form=form;
				$input.onclick=function()
				{
					eval(Element(this.dataset.form).dataset.submit);
					submit(Element(this.dataset.form).dataset.sel);
				}
				Element(form).dataset.submit=f_submit;
			}
			function ShowDialog(html)
			{
				Element("cover").style.display="block";
				Element("dialog").style.display="block";
				Element("dialog").innerHTML=html;
			}
			function HideDialog()
			{
				Element("cover").style.display="none";
				Element("dialog").style.display="none";
			}

			//游戏内容
			var 百科全书=
			{
				//武器
				木弓: {介绍: "可以说是最常见的弓，垃圾玩意。", 重量: 2, 制作: "手工", 材料: {树枝: 5, 藤条: 1}, 蓄力: 3, 攻击: [0,2,4]},
				石杖: {介绍: "一个套了破壳子的魔法单元而已。", 重量: 3, 制作: "手工", 材料: {石头: 5, 魔法单元: 1}, 蓄力: 3, 攻击: [0,2,3]},
				钝剑: {介绍: "又细又轻，没啥威力，小心散架。", 重量: 3, 制作: "手工", 材料: {树枝: 2, 石头: 4}, 蓄力: 2, 攻击: [1,2]},
				//衣着
				毛衣: {介绍: "神秘物品，没有人知道它的来历。", 重量: 0, 制作: "tan90°", 护甲: 1},
				盾牌: {介绍: "再也不怕被弓箭射死了，大概吧。", 重量: 2, 制作: "制器桌", 格挡: 1},
				//食物
				萝卜干: {介绍: "无味且涩，旅途中勉强填饱肚子。", 重量: 0.2, 制作: "火炉", 健康值: 0, 饱食值: 2, 精力值: 0, 保质期: 25},
				//材料
				树枝: {介绍: "这是一根普通的树枝，随处可见。", 重量: 0.2},
				石头: {介绍: "一种和拳头差不多大的常见硬物。", 重量: 0.2},
				魔法单元: {介绍: "令人着魔的小东西，你不觉得吗？", 重量: 0.5},
				箭: {介绍: "光秃秃的，但谁也不愿意被它扎。", 重量: 0.1}
			}
			var 角色信息=[],玩家=0,敌人一=101;
			var 时间=0;
			var 天数=0;
			function 信息(cbf$)
			{
				Element("Kt_角色信息").innerHTML="【域牌】";
				Type("K_角色信息",cbf$,true,"【"+角色信息[玩家].名字+"】: 【健康值: "+角色信息[玩家].健康值+"/ "+角色信息[玩家].健康值_+"】* 【饱食值: "+角色信息[玩家].饱食值+"/ "+角色信息[玩家].饱食值_+"】* 【健康值: "+角色信息[玩家].精力值+"/ "+角色信息[玩家].精力值_+"】#");
			}
			function 走起()
			{
				HideElement("M_操作");
				if(天数==1) //操作教程，硬码
				{
					if(时间==0)
					{
						Element("Kt_描述").innerHTML="【域】* 【传送点】<div class='lines'></div>";
						Type("K_描述",function(){ShowElement("M_操作");ShowElement("B_背包");ShowElement("B_走起");},true,"你眼前闪过一道刺眼的灰光，于是你眯起了眼睛，几秒过后，眼前的世界完全变了……%眼前空空荡荡，仿佛连墙壁都看不到。你好一会才从这小说里才会出现的场景里回过神来。$“这就是【域】吗？”%【域灵】:$“没错。现在请跟我来【储物间】，这里有一些我从【蛮荒大陆】搜集来的必需品。$你可以带上这个背包，随后跟我来。”$%【域灵】指向的地方躺着一只不知由什么材料做成的军绿色背包，于是你走过去把它背在了身上。");
					}
					else if(时间==1)
					{
						Type("K_描述",function(){ShowElement("K_选项");ShowElement("B_选项一");var $B_选项一=Element("B_选项一");$B_选项一.innerHTML="<h3>好嘞~</h3>";$B_选项一.onclick=function(){HideElement("K_选项");ShowElement("B_选项一");信息(function(){ShowElement("M_操作");});};},true,"【域灵】掏出一块银白色的牌子: “"+角色信息[玩家].名字+"，还有这个，叫做【域牌】，目前它的功能就是显示你的【信息】，我劝你不要弄丢……”%“诶，这TM不就是把我带到这个什么【域】里面的牌子嘛！”%【域灵】: “……闭嘴！那啥，把它系在手上吧，方便看。”");
					}
					else if(时间==2)
					{
						Type("K_描述",function(){信息(function(){ShowElement("K_选项");ShowElement("B_选项一");var $B_选项一=Element("B_选项一");$B_选项一.innerHTML="<h3>来吧！</h3>";$B_选项一.onclick=function(){战斗([玩家,敌人一]);};});},true,"你小心地系好了【域牌】，暗自对眼前这个新奇的世界增添了几丝佩服：“这高科技，怕不是领先我大中华几万年……”%【域灵】:$“这不算什么，等你看到魔法玄学一类，emmm……$不过现在请先随我来【训练室】，这里会模拟与你【信息】相似的虚拟对手，来和这个【训练木偶】‘切磋切磋’吧！”")
					}
					if(时间<3)时间++;
					else ShowDialog("<h2>【咕咕咕】</h2> <br> <h3>作者正在努力码后续的剧情，敬请期待！ <br> 【注意】：不是咕咕咕！ </h3>")
				}
			}
			function 称重()
			{
				var w=0;
				for(var i in 角色信息[玩家].物品)w+=角色信息[玩家].物品[i].数量*百科全书[i].重量;
				return w;
			}
			function 背包()
			{
				ShowElement("M_背包");
				HideElement("M_操作");
				Log(角色信息[玩家]);
				var $M_背包=Element("M_背包");
				var $Br_背包=Element("Br_背包");
				var $K_物品=NewElement("K_物品","div");
				$M_背包.insertBefore($K_物品,$Br_背包);
				var $K_重量=NewElement("K_重量","h3");
				$K_重量.innerHTML="【重量: "+称重()+"/ "+角色信息[玩家].物品_+"】<div class='lines'></div>";
				$K_物品.appendChild($K_重量);
				for(var i in 角色信息[玩家].物品)
				{
					var $i=NewElement("","h3");
					$i.innerHTML="<br>【"+i+"* "+角色信息[玩家].物品[i].数量+"】: "+百科全书[i].介绍+"<div class='lines'></div>";
					$K_物品.appendChild($i);
				}
			}
			function 战斗(参战人数,参战人员)
			{
				ShowDialog("<h2>【咕咕咕】</h2> <br> <h3>战斗函数尚未完成，敬请期待！</h3>");
			}
			function 准备工作()
			{
				if(event&&event.preventDefault)event.preventDefault();
				else window.event.returnValue=false;
				
				SetFocus("/");
				ShowDialog("<h2>【健康游戏忠告】</h2><h3>抵制不良游戏，拒绝盗版游戏。 注意自我保护，谨防受骗上当。</h3><h3>适度游戏益脑，沉迷游戏伤身。 合理安排时间，享受健康生活。</h3>\
							<span class='sel' onclick='HideDialog();'><h3>确定</h3></span>")
				FormSelbox("SbF_选择职业");
				AddSelbox("SbF_选择职业","Sb_选择职业_弓箭手");
				AddSelbox("SbF_选择职业","Sb_选择职业_魔法师");
				AddSelbox("SbF_选择职业","Sb_选择职业_重战士");
				SubmitSelbox("SbF_选择职业","SbS_选择职业",
				function submit(sel)
				{
					sel=sel.substring(8);
					if(sel=="")ShowDialog("<h2>【有些问题】</h2><h3>请先选择职业再提交！</h3><span class='sel' onclick='HideDialog();'><h3>确定</h3></span>");
					else
					{
						ShowDialog("<h2>【嘿！消息】</h2><h3>你选择了【"+sel+"】作为你的职业！</h3>\
									<span class='sel' onclick='HideDialog();'><h3>确定</h3></span>");
						角色信息[玩家]=
						{
							"弓箭手":
							{
								健康值: 150,
								健康值_: 200,
								饱食值: 100,
								饱食值_: 200,
								精力值: 20,
								精力值_: 30,
								物品:
								{
									木弓: {数量: 1, 耐久: 30, 耐久_: 30},
									毛衣: {数量: 1, 耐久: Infinity, 耐久_: Infinity},
									萝卜干: {数量: 10, 新鲜度: 25},
									箭: {数量: 10}
								},
								物品_: 25
							},
							"魔法师":
							{
								健康值: 150,
								健康值_: 180,
								饱食值: 100,
								饱食值_: 180,
								精力值: 25,
								精力值_: 45,
								物品:
								{
									石杖: {数量: 1, 耐久: 30, 耐久_: 30},
									萝卜干: {数量: 10, 新鲜度: 25},
									毛衣: {数量: 1, 耐久: Infinity, 耐久_: Infinity},
									魔法单元: {数量: 2}
								},
								物品_: 25
							},
							"重战士":
							{
								健康值: 150,
								健康值_: 175,
								饱食值: 120,
								饱食值_: 220,
								精力值: 20,
								精力值_: 25,
								物品:
								{
									钝剑: {数量: 1, 耐久: 40, 耐久_: 40},
									盾牌: {数量: 1, 耐久: 25, 耐久_: 25},
									萝卜干: {数量: 10, 新鲜度: 25},
									毛衣: {数量: 1, 耐久: Infinity, 耐久_: Infinity}
								},
								物品_: 25
							}
						}[sel];
						HideElement("SbF_选择职业");
						ShowElement("TF_名字");
					}
				});
				FormInput("TF_名字");
				AddInput("TF_名字","T_名字",12);
				SubmitInput("TF_名字","TS_名字",
				function submit(value)
				{
					if(value=="/")ShowDialog("<h2>【有些问题】</h2><h3>名字不得为空哦~</h3>\
											  <span class='sel' onclick='HideDialog();'><h3>确定</h3></span>");
					else
					{
						角色信息[玩家].名字=value;
						ShowDialog("<h2>【嘿！消息】</h2><h3>尊敬的冒险者【"+角色信息[0].名字+"】，<br>欢迎来到【蛮荒大陆】！<br>我是您的【域灵】，接下来我将为您讲述【蛮荒大陆】的故事……</h3>\
								 <span class='sel' onclick=' ~function(){HideDialog();HideElement(\"M_创建角色\");ShowElement(\"M_看板\");Element(\"Kt_描述\").innerHTML=\"【宇宙】* 【小区】* 【家】<div class=&apos;lines&apos;></div>\";Type(\"K_描述\",\
								 function(){var $i=Element(\"B_选项一\");ShowElement(\"K_选项\");ShowElement(\"B_选项一\");$i.innerHTML=\"<h3>确定</h3>\";$i.onclick=function(){HideElement(\"K_选项\");HideElement(\"B_选项一\");天数=1;走起();};},true,\
								 \"【域灵】:$“……【蛮荒大陆】可是说是另一个世界，$而我们【域灵】就是沟通【宇宙】和【蛮荒大陆】的唯一方法……$每个【域灵】都有一个称为【域】的小空间，由于两个世界的【规则】不同，$所以一个世界的物品不能存在于另一个里，而【域】，就相当于一个中转站，不受【规则】的限制。$接下来您将进入我的【域】，准备好了吗？”\");}()\
								 '><h3>确定</h3></span>");
					}
				});
			}
		</script>
	</head>
	<body onload="准备工作()">
		<div id='focus' style='display: none;'></div>
		<div id='cover' class='cover'></div>
		<div id='dialog' class='dialog'></div>
		<div id='M_页头'>
			<h1>【Barren Land 蛮荒大陆】 【Version】 0.1.3</h1> <br>
			<div class='line'></div>
		</div>
		<div id='M_开始'>
			<span class='sel' onclick='~function(){HideElement("M_开始");ShowElement("M_看板");Element("Kt_描述").innerHTML="* 【小区】* 【家】<div class=&apos;lines&apos;></div>";Type("K_描述",function(){ShowElement("K_选项");ShowElement("B_选项一");var $i=Element("B_选项一");$i.innerHTML="<h3>看看写了啥</h3>";$i.onclick=function(){HideElement("K_选项");ShowElement("B_选项一");HideElement("M_看板");ShowElement("M_创建角色");}},0,"作为一只21岁的御宅族，你对收集东西hin有兴趣，家里成堆的手办、印章、电子产品和叉子【划去】……%“当！”椅子后面传来不明的声音。“什么鬼，难道那个绿蓝的挂件又掉了？”扭头一看，居然是一块奇怪的银白色牌子。$你把它捡了起来，看到牌子竟像手机一样，显示着一些文字……");}()'><h3>开始</h3></span>
			<span class='sel' onclick='~function(){~function(){ShowDialog("<h2>【咕咕咕】</h2> <br> <h3>非常抱歉！读档功能未开放，敬请期待！</h3>\
									   <span class=&apos;sel&apos; onclick=&apos;HideDialog()&apos;><h3>确定</h3></span>");}()}()'><h3>读档</h3></span>
			<div class='line'></div>
		</div>
		<div id='M_创建角色' style='display: none;'>
			<h2>【创建角色】</h2>
			<div class='lines'></div>
			<div id='SbF_选择职业'>
				<h3>请选择您的职业。</h3> <br>
				<span id='Sb_选择职业_弓箭手' class='selbox' style='position:absolute'><span style='display: none;'></span></span>
				<h3 style='margin-left: 20px;'>【弓箭手】 身材不算强壮也不算羸弱，食量平均。用敏捷的优势击败少数敌人，擅长出其不意地刺杀，逃跑速度也是一流；不适合长时间地战斗。</h3> <br>
				<span id='Sb_选择职业_魔法师' class='selbox' style='position:absolute'><span style='display: none;'></span></span>
				<h3 style='margin-left: 20px;'>【魔法师】 似乎一阵风都能将其刮走，可能是因为不常吃东西的缘故。运用神秘的力量重创大量敌人；虽说脆皮但精神力极强，可以几天不睡觉。</h3> <br>
				<span id='Sb_选择职业_重战士' class='selbox' style='position:absolute'><span style='display: none;'></span></span>
				<h3 style='margin-left: 20px;'>【重战士】 吨位较突出，对食物的要求极大。熟练使用各式冷兵器，单打独斗没问题；就算遇到人群，也能杀开一条血路。战斗时变得十分兴奋。</h3> <br>
				<span id='SbS_选择职业' class='sel'><h3>确定</h3></span>
			</div>
			<div id='TF_名字' style='display: none;'>
				<h3>请输入您的名字。</h3> <br>
				<span id='T_名字' class='input'><h3>&nbsp;</h3></span>
				<span id='TS_名字' class='sel'><h3>提交</h3></span>
			</div>
			<div class='line'></div>
		</div>
		<div id='M_看板' style='display: none;'>
			<h2 id='Kt_角色信息'></h2>
			<h3 id='K_角色信息'></h3>
			<h2 id='Kt_描述'</h2>
			<h3 id='K_描述'></h3>
			<div id='K_选项'>
				<div class='lines'></div>
				<h2 id='Kt_选项'></h2>
				<span id='B_选项一' class='sel' style='display: none;'></span>
				<span id='B_选项二' class='sel' style='display: none;'></span>
				<span id='B_选项三' class='sel' style='display: none;'></span>
				<span id='B_选项四' class='sel' style='display: none;'></span>
			</div>
			<div class='line'></div>
		</div>
		<div id='M_操作' style='display: none;'>
			<span id='B_背包' class='sel' onclick='~function(){ShowElement("M_背包");背包();}()' style='display: none;'><h3>背包</h3></span>
			<span id='B_走起' class='sel' onclick='走起();' style='display: none;'><h3>走起</h3></span>
			<div class='line'></div>
		</div>
		<div id='M_背包' style='display: none;'>
			<h2 id='Kt_背包'>【背包】</h2>
			<div class='lines'></div>
			<span id='Br_背包' class='sel' onclick='~function(){ShowElement("M_操作");HideElement("M_背包");DelElement("K_物品");}()'><h3>返回</h3></span>
			<div class='line'></div>
		</div>
		<div id='M_页尾'>
			<h2>【Ice--Lava~~ 冰の岩浆】* 【Fork Ψ Killet】 最后一次升级于 【2018-10-25】</h2> <br>
				<span class='sel' onclick='~function(){ShowDialog("<h2>【嘿！消息】</h2> <br> <h3>谢谢！游戏内容正在疯狂敲代码中，敬请期待！</h3>\
									   	   <span class=&apos;sel&apos; onclick=&apos;HideDialog()&apos;><h3>确定</h3></span>");}()'><h3>点赞</h3></span>
			<a href='https://github.com/ForkFG/ForkFG.github.io' target="_blank"><span class='sel'><h3>跳转至 Github</h3></span></a>
		</div>
	</body>
</html>
